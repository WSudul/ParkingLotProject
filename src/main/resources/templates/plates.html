<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/layout :: layout (~{::body},'header')}">
<head>
    <title>Plates</title>

</head>
<body>
<div class="container my-5">
    <div class="row">
        <div class="col-md-6">

            <div th:if="${#lists.isEmpty(entryHistory)}">
                <h2> No entries</h2>
            </div>
            <div th:if="${not #lists.isEmpty(entryHistory)}">
                <h2 class="my-5">Plate Entries</h2>
                <table class="table table-striped table-responsive-md">
                    <thead>
                    <tr>

                        <th>Plate</th>
                        <th>From</th>
                        <th>To</th>
                        <th>Duration [min]</th>
                        <th>Lot</th>
                        <th>Location</th>
                        <th>LotInfo</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="entry : ${entryHistory}">
                        <td th:text="${entry.plate.plate}"></td>
                        <td th:text="${#temporals.format(entry.dateFrom.toLocalTime(),'yyyy-MM-dd HH:mm:ss')}"></td>
                        <td th:text="${entry.dateTo==null?'Active':
                            #temporals.format(entry.dateTo.toLocalTime(),'yyyy-MM-dd HH:mm:ss')}">
                        </td>


                        <td th:with="minutes=${T(java.time.temporal.ChronoUnit).MINUTES}"
                            th:text="${entry.dateTo==null?'Active':minutes.between(entry.dateFrom,entry.dateTo)}"
                        >
                            Active
                        </td>

                        <td th:text="${entry.lot.name}"></td>
                        <td th:text="${entry.lot.location}"></td>

                        <td><a th:href="@{/status/lotstatus(name=${entry.lot.name})}" class="btn btn-primary"><i
                                class="fas fa-user-edit ml-2"></i></a></td>

                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</body>
</html>